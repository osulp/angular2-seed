<div class="row place-select" [ngClass]="setClasses('')">
    <div [ngClass]="setClasses('MapCol')">
        <div class="row row-map">
            <div class="col-xs-12">
                <div id="viewDiv" [ngClass]="setClasses('Map')">
                    <leaflet-map [visible]="isVisible"></leaflet-map>
                    <!--<esri-map [options]="mapOptions" (mapLoaded)="onMapLoad($event)">
                        <esri-search [options]="searchOptions"></esri-search>
                    </esri-map>-->
                </div>
            </div>
        </div>
    </div>
    <div id="find-compare-combine" [ngClass]="setClasses('FindCombComp')">
        <div class="row">
            <div class="col-xs-12">
                <h2>Find, Compare and Combine Communities</h2>
                <p>
                    Select communities by clicking the map or typing below.
                    Drag one community onto another to combine selected communities.
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-10 col-md-10 col-xs-12" id="search-bin">
                <div class="row">
                    <div id="search" class="col-lg-12 col-md-12 col-xs-12">
                        <span class="fa fa-search"></span>
                        <input [(ngModel)]="searchTerms" #searchInput type="text" [(ngFormControl)]="term" placeholder="Type in a place name." (click)="inputSearchClickHandler($event, result);" (blur)="blurHandler($event);" (keypress)="inputKeypressHandler($event, result);" />
                        <div id="add-btn">+</div>
                        <div *ngIf="searchTerms" class="list-group">
                            <a *ngFor="let result of searchResults | async" href="javascript:void(0);" class="list-group-item" [attr.data-search-item]="result | json" (keypress)="inputKeypressHandler($event, result)" (click)="clickedSearchResult($event, result)">
                                <div class="search-result-wrapper">
                                    <!--<div class="isPlace search-result-type">
                                        {{result.Type}}
                                    </div>-->
                                    <div class="search-result-content">
                                        <div class="search-result-name">
                                            <span>{{result.Name}}</span>
                                            <span *ngIf="result.TypeCategory" class="typeCategory">({{result.TypeCategory}})</span>
                                        </div>
                                        <div *ngIf="result.Desc" class="search-result-desc">
                                            {{result.Desc}}
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                    <div id="selected-places-bin" class="col-lg-12 col-md-12 col-xs-12">
                        <div class="row">
                            <div #placeContainer class="col-lg-4 col-md-6 col-xs-12 place-bin-wrapper" *ngFor="let place of selectedSearchResults; let idx = index;" [attr.orig_container]="translatePlaceTypes(place.TypeCategory,place.Name)" [attr.editView]="false">
                                <div *ngIf="dragBin.getElementsByClassName('place-bin').length > 1 && placeContainer.getAttribute('editView') === 'true'" class="combinedLabel">
                                    <input #inpPlace type="text" placeholder="Combined Set" (keypress)="onCombineLabelKeyPress($event)" />
                                </div>
                                <div *ngIf="dragBin.getElementsByClassName('place-bin').length > 1 && placeContainer.getAttribute('editView') === 'false'" class="combinedLabel">
                                    {{place.GroupName}}
                                    <span (click)="placeContainer.setAttribute('editView','true')"><img src="assets/img/closeX2.png" alt="remove selected place" /></span>
                                </div>

                                <div #dragBin [hidden]="place.Combined && placeContainer.getAttribute('editView') === 'false'" [dragula]="translatePlaceTypes(place.TypeCategory)" [attr.groupname]="translatePlaceTypes(place.TypeCategory,place.Name)">
                                    <div #placeBin [attr.placeName]="place.Name" [attr.placeResID]="place.ResID" [attr.placeType]="place.TypeCategory" [attr.combined]="place.Combined" class="place-bin">
                                        {{place.Name}}
                                        <span (click)="removePlace(place)"><img src="assets/img/closeX2.png" alt="remove selected place" /></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div id="place-btn-col" class="col-lg-2 col-md-2 col-xs-12">
                <div class="row">
                    <div (click)="addPlaceCompare('Rural')" class="add-place-btn col-xs-4 col-md-12">Rural<span>+</span></div>
                    <div (click)="addPlaceCompare('Urban')" class="add-place-btn col-xs-4 col-md-12">Urban<span>+</span></div>
                    <div id="go-report-button" class="col-xs-4 col-md-12"> Go </div>
                </div>
            </div>
        </div>
    </div>
</div>